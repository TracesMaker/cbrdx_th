<p-messages [value]="msgs"></p-messages>
<p-confirmDialog width="400" #cd>
    <p-footer>
        <button type="button" pButton icon="fa-close" label="No" (click)="cd.reject()"></button>
        <button type="button" pButton icon="fa-check" label="Si" (click)="cd.accept()"></button>
    </p-footer>
</p-confirmDialog>
<div *ngIf="experience">
    <div class="row">
        <div class="col-md-12">
            <div class="header">
                <h4 class="title">{{header}}</h4>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="col-md-12">
            <form name="formulario" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate id="formulario"
                  class="form">
                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="empresa">Empresa</label>
                            <input id="empresa" type="text" pInputText name="empresa"
                                   [(ngModel)]="experience.empresa" #empresa="ngModel"
                                   required/>
                            <div class="ui-message ui-messages-error ui-corner-all"
                                 *ngIf="f.submitted && !empresa.valid">
                              <i class="fa fa-close"></i>
                              Empresa es requerido
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                          <label for="telefonoEmpresa">Teléfono Empresa</label>
                          <input id="telefonoEmpresa" type="text" pInputText name="telefonoEmpresa"
                                 [(ngModel)]="experience.telefonoEmpresa" #telefonoEmpresa="ngModel"
                                 required/>
                          <div class="ui-message ui-messages-error ui-corner-all"
                               *ngIf="f.submitted && !telefonoEmpresa.valid">
                            <i class="fa fa-close"></i>
                            Teléfono Empresa es requerido
                          </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="sectorEmpresa">Sector Empresa</label>
                            <p-dropdown name="sectorEmpresa" id="sectorEmpresa"  required="true" [autoWidth]="false"
                                        [(ngModel)]="experience.idSectorEmpresa"
                                        [options]="sector" #sectorEmpresa="ngModel"
                                        (onChange)="updateActivities($event.value)"
                            ></p-dropdown>
                            <div class="ui-message ui-messages-error ui-corner-all"
                                *ngIf="f.submitted && !sectorEmpresa.valid">
                                <i class="fa fa-close"></i>
                                Sector Empresa es requerido
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="subsectorEmpresa">Actividad Ecónomica Principal</label>
                            <p-dropdown name="subSectorEmpresa" id="subSectorEmpresa" [autoWidth]="false" required="true"
                                        [(ngModel)]="experience.idSubSectorEmpresa" filter="filter"
                                        [options]="activities" #subSectorEmpresa="ngModel"
                            ></p-dropdown>
                            <div  class="ui-message ui-messages-error ui-corner-all"
                                  *ngIf="f.submitted && !subSectorEmpresa.valid">
                                <i class="fa fa-close"></i>
                                Actividad Economica es requerido
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="cargo">Cargo</label>
                            <input id="cargo" type="text" pInputText name="cargo"
                                   [(ngModel)]="experience.cargo" #cargo="ngModel"
                                   required/>
                            <div  class="ui-message ui-messages-error ui-corner-all"
                                  *ngIf="f.submitted && !cargo.valid">
                              <i class="fa fa-close"></i>
                              Cargo es requerido
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="nivelCargo">Nivel Cargo</label>
                            <p-dropdown name="nivelCargo" id="nivelCargo" [autoWidth]="false" required="true"
                                        [(ngModel)]="experience.idNivelCargo"
                                        [options]="officeLevel" #nivelCargo="ngModel"
                            ></p-dropdown>
                            <div  class="ui-message ui-messages-error ui-corner-all"
                                  *ngIf="f.submitted && !nivelCargo.valid">
                              <i class="fa fa-close"></i>
                              Nivel Cargo es requerido
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="areaCargo">Area Cargo</label>
                            <input id="areaCargo" type="text" pInputText name="areaCargo"
                                   [(ngModel)]="experience.areaCargo" #areaCargo="ngModel"
                                   required/>
                            <div  class="ui-message ui-messages-error ui-corner-all"
                                  *ngIf="f.submitted && !areaCargo.valid">
                              <i class="fa fa-close"></i>
                              Area Cargo es requerido
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="jefeInmediato">Jefe Inmediato</label>
                            <input id="jefeInmediato" type="text" pInputText name="jefeInmediato"
                                   [(ngModel)]="experience.jefeInmediato" #jefeInmediato="ngModel"
                                   required/>
                            <div  class="ui-message ui-messages-error ui-corner-all"
                                  *ngIf="f.submitted && !jefeInmediato.valid">
                              <i class="fa fa-close"></i>
                              Jefe Inmediato es requerido
                            </div>
                          </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-md-12">
                        <label for="ciudad">Ciudad</label>
                        <p-autoComplete placeholder="Buscar Ciudad " field="camino" name="ciudad" id="ciudad" #ciudad="ngModel" required="true"
                                        [(ngModel)]="city"
                                        [suggestions]="cityList"
                                        (completeMethod)="searchCity($event)"
                                        (onSelect)="captureCity($event)">
                        </p-autoComplete>
                        <div  class="ui-message ui-messages-error ui-corner-all"
                              *ngIf="f.submitted && !ciudad.valid">
                          <i class="fa fa-close"></i>
                          Ciudad es requerido
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-md-4"
                           [ngClass]="{ 'has-error': f.submitted && !ingreso.valid }">
                        <label for="ingreso">Fecha de Ingreso</label>
                        <p-calendar id="ingreso" name="ingreso" #ingreso="ngModel"
                                    (onSelect)="onSelectMethodCalendarIngreso($event)" [showIcon]="true"
                                    [maxDate]="maxDateIngreso" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="range"
                                    [locale]="es" readonlyInput="true" [dataType]="date" required="true"
                                    [disabled]="disabled" [(ngModel)]="fechaIngresa">
                        </p-calendar>
                        <div  class="ui-message ui-messages-error ui-corner-all"
                              *ngIf="f.submitted && !ingreso.valid">
                          <i class="fa fa-close"></i>
                          Ingreso  es requerido
                        </div>
                      </div>
                      <div class="form-group col-md-2">
                        <label for="actualmente">Actualmente</label>
                        <p-toggleButton id="actualmente" name="actualmente" onLabel="Si" offLabel="No" #actualmente="ngModel"
                                        onIcon="fa-check-square" offIcon="fa-square"
                                        [(ngModel)]="experience.indicadorActualmente">
                        </p-toggleButton>
                      </div>
                      <div class="form-group col-md-4" *ngIf="!experience.indicadorActualmente">
                        <label for="finalizacion">Fecha de Finalización</label>
                        <p-calendar id="finalizacion" name="finalizacion" #finalizacion="ngModel"
                                    (onSelect)="onSelectMethodCalendarFinalizacion($event)" [showIcon]="true" required="true"
                                    [minDate]="minDate" [maxDate]="maxDateFinal" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="range"
                                    [locale]="es"  readonlyInput="true" [dataType]="date"
                                    [disabled]="disabled" [(ngModel)]="fechaTermina">
                        </p-calendar>
                        <div  class="ui-message ui-messages-error ui-corner-all"
                              *ngIf="f.submitted && !finalizacion.valid">
                          <i class="fa fa-close"></i>
                          Finalización  es requerido
                        </div>
                      </div>

                    </div>
                </div>
              <div class="row form-footer-buttons">
                <div class="form-group col-md-12">
                  <a (click)="goBack()" class="cancelar">Cancelar</a>
                  <button pButton type="submit" label="Guardar"></button>
                </div>
              </div>
            </form>
      </div>

    </div>

</div>

