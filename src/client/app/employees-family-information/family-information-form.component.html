<p-messages [value]="msgs"></p-messages>
<p-confirmDialog width="400"></p-confirmDialog>
<div *ngIf="familyInformation">
    <div class="row">
        <div class="col-md-12">
            <div class="header">
                <h4 class="title">{{header}}</h4>
            </div>
        </div>
    </div>
    <form [formGroup]="familyform" (ngSubmit)="onSubmit(familyform.value)" (keydown)="keyPressOnForm($event)">
        <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
            <div class="ui-grid-row">
                <div class="ui-grid-col-6">
                    <label for="tipoDeDocumento">* Tipo de documento</label>
                    <p-dropdown id="tipoDeDocumento"  name="tipoDeDocumento" [options]="documentTypes" formControlName="tipoDeDocumento" [autoWidth]="false" (onChange)="onChangeMethod($event)"
                                [(ngModel)]="selectedDocument"></p-dropdown>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['tipoDeDocumento'].valid&&familyform.controls['tipoDeDocumento'].dirty">
                        <i class="fa fa-close"></i>
                        Tipo de documento es requerido
                    </div>
                </div>
                <div class="ui-grid-col-6">
                    <label for="numeroDeDocumento">* Número de documento</label>
                    <input id="numeroDeDocumento" name="numeroDeDocumento" pInputText type="text" formControlName="numeroDeDocumento"
                           [(ngModel)]="familyInformation.numeroDeDocumento"/>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['numeroDeDocumento'].valid&&familyform.controls['numeroDeDocumento'].dirty">
                        <i class="fa fa-close"></i>
                        Número de documento es requerido
                    </div>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-6">
                    <label for="primerNombre">* Primer nombre</label>
                    <input id="primerNombre" name="primerNombre" pInputText type="text" formControlName="primerNombre"
                           [(ngModel)]="familyInformation.primerNombre"/>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['primerNombre'].valid&&familyform.controls['primerNombre'].dirty">
                        <i class="fa fa-close"></i>
                        Primer nombre es requerido
                    </div>
                </div>
                <div class="ui-grid-col-6">
                    <label for="segundoNombre">Segundo nombre</label>
                    <input id="segundoNombre" name="segundoNombre" pInputText type="text" formControlName="segundoNombre"
                           [(ngModel)]="familyInformation.segundoNombre" />
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-6">
                    <label for="primerApellido">* Primer apellido</label>
                    <input id="primerApellido" name="primerApellido" pInputText type="text" formControlName="primerApellido"
                           [(ngModel)]="familyInformation.primerApellido"/>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['primerApellido'].valid&&familyform.controls['primerApellido'].dirty">
                        <i class="fa fa-close"></i>
                        Primer apellido es requerido
                    </div>
                </div>
                <div class="ui-grid-col-6">
                    <label for="segundoApellido">Segundo apellido</label>
                    <input id="segundoApellido" name="segundoApellido" pInputText type="text" formControlName="segundoApellido"
                           [(ngModel)]="familyInformation.segundoApellido"/>
                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-4">
                    <label for="fechadeNacimiento">* Fecha de nacimiento</label>
                    <p-calendar id="fechadeNacimiento" name="fechadeNacimiento"  [showIcon]="true"
                                [maxDate]="maxDate" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="range" [locale]="es" readonlyInput="readonlyInput"
                                formControlName="fechadeNacimiento" [dataType]="date" (onSelect)="onSelectMethod($event)" (onBlur)="onBlurMethod($event)" [disabled]="disabled"
                                [(ngModel)]="familyInformation.fechadeNacimiento"></p-calendar>

                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['fechadeNacimiento'].valid && familyform.controls['fechadeNacimiento'].dirty">
                        <i class="fa fa-close"></i>
                        Fecha de nacimiento es requerida
                    </div>
                </div>
                <div class="ui-grid-col-4">
                    <label for="correoElectronico">* Correo electronico</label>
                    <input id="correoElectronico" name="correoElectronico" pInputText type="text" formControlName="correoElectronico"
                           [(ngModel)]="familyInformation.correoElectronico" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"/>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['correoElectronico'].valid && familyform.controls['correoElectronico'].dirty">
                        <i class="fa fa-close"></i>
                        <span *ngIf="familyform.controls['correoElectronico'].errors['required']">Correo electronico es requerido</span>
                        <span *ngIf="familyform.controls['correoElectronico'].errors['pattern']">formato xxx@xxx.com</span>
                    </div>
                </div>
                <div class="ui-grid-col-4">
                    <label for="parentesco">* Parentesco</label>
                    <p-dropdown id="parentesco"  name="parentesco" [options]="relationship" formControlName="parentesco" [autoWidth]="false"
                                [(ngModel)]="selectedRelationship "></p-dropdown>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['parentesco'].valid&&familyform.controls['parentesco'].dirty">
                        <i class="fa fa-close"></i>
                        Parentesco es requerido
                    </div>
                </div>
                <!--<div class="ui-grid-col-6">-->
                    <!--<label for="segundoApellido">Segundo apellido</label>-->
                    <!--<input id="segundoApellido" name="segundoApellido" pInputText type="text" formControlName="segundoApellido" />-->
                <!--</div>-->
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-5">
                    <label for="telefono1">* Teléfono 1</label>
                    <input id="telefono1" name="telefono1" pInputText type="text" formControlName="telefono1"
                           [(ngModel)]="familyInformation.telefono1"/>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['telefono1'].valid&&familyform.controls['telefono1'].dirty">
                        <i class="fa fa-close"></i>
                        Teléfono es requerido
                    </div>
                </div>
                <div class="ui-grid-col-5">
                    <label for="telefono2">Teléfono 2</label>
                    <input id="telefono2" name="telefono2" pInputText type="text" formControlName="telefono2"
                           [(ngModel)]="familyInformation.telefono2" />
                </div>
                <div class="ui-grid-col-2">
                    <label for="convive">Convive</label>
                    <p-checkbox id="convive"  name="convive" formControlName="convive"
                                [(ngModel)]="familyInformation.convive" binary="true"></p-checkbox>

                </div>
            </div>
            <div class="ui-grid-row">
                <div class="ui-grid-col-12">
                    <label for="direccionDeResidencia">* Dirección de residencia</label>
                    <textarea id="direccionDeResidencia" name="direccionDeResidencia" pInputTextarea formControlName="direccionDeResidencia" rows="5"
                              [(ngModel)]="familyInformation.direccionDeResidencia" ></textarea>
                    <div class="ui-message ui-messages-error ui-corner-all" *ngIf="!familyform.controls['direccionDeResidencia'].valid&&familyform.controls['direccionDeResidencia'].dirty">
                        <i class="fa fa-close"></i>
                        Dirección de residencia es requerido
                    </div>
                </div>

            </div>
            <div class="ui-grid-row form-footer-buttons">
                <div class="ui-grid-col-4"></div>
                <div class="ui-grid-col-1">
                    <a (click)="goBack()" class="cancelar">Cancelar</a>
                </div>
                <div class="ui-grid-col-2">
                    <button icon="fa-plus" label="Guardar" type="submit"
                            [disabled]="!familyform.valid" pButton></button>
                </div>
                <div class="ui-grid-col-5"></div>
            </div>
        </div>
    </form>
</div>
